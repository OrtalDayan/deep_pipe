import "shared.config"
from "/home/gleb/deep_pipe/config_examples" import (
	"assets/data_source/cobrain/brats.coreg.config"
	"assets/dataset/brats.coreg.config",
    "brats.base.config",
    "assets/batch_iter/patch_3d.config"
	"assets/model/deepmedic_els.config"
	"assets/problem/segm.tf.config"
)
# from "/nmnt/media/home/gleb/deep_pipe/config_examples" import (
# 	"assets/data_source/iitp/brats.config"
# 	"assets/dataset/brats.config",
#     "brats.base.config",
#     "assets/batch_iter/patch_3d.config"
# 	"assets/model/deepmedic_els.config"
# 	"assets/problem/segm.tf.config"
# )
from dpipe.split.cv_111 import cv_111_truncated
from dpipe.split.cv_111 import group_cv_111_pure_011
from dpipe.tf.model import TFModel

makefile = "train_segm_eval_light"
n_epochs = 50
batch_size = 24

split = group_cv_111_pure_011(
    n_splits = 5,
    val_size = 6,
    dataset = dataset
)

model = TFModel(
    model_core = model_core,
    logits2pred = logits2pred,
    logits2loss = logits2loss,
    optimize = optimize,
    # transfer_model_path = "/home/gleb/exp/oasis/20/experiment_0/model"
)

model_core = DeepMedicEls(
    with_dropout = True,
    dropout_rate = 0.5,
    downsampling_type = "sampling",
    n_chans_in = n_chans_in,
    n_chans_out = n_chans_out
)
